<!DOCTYPE html>
<html>
  <head>
    <meta charset="UTF-8" />
    <title>HN</title>
  </head>
  <body>
    <hn-app></hn-app>
    <script type="module" src="./src/hn-app.js"></script>
    <script type="module">
      import { store } from "./src/store.js";

      const $title = document.querySelector("title");
      store.subscribe(state => {
        const title = getTitle(state);
        if ($title.innerHTML !== title) {
          $title.innerHTML = title;
        }
      });

      const getTitle = state => {
        let title = "HN";
        let moreInfo = "";
        if (state.page === "list") {
          moreInfo = state.view;
        } else if (state.page === "item") {
          moreInfo = state.item.title;
        }

        if (moreInfo) {
          title += " - " + moreInfo;
        }
        return title;
      };
    </script>
  </body>
</html>
